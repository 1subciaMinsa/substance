{"version":3,"file":"domutils.js","sources":["domutils/DomUtils.js","_domutils.js"],"sourcesContent":["import ElementType from 'domelementtype';\r\n\r\n/*\r\n  EXPERIMENTAL:\r\n\r\n  We found out that using the encoder from `entities` module\r\n  is doing too much\r\n\r\n  Instead we do a simpler version now, encoding just a small\r\n  set:\r\n  - in attributes we only need to escape '\"'\r\n  - in textContent we need to escape '<' and '&'\r\n\r\n  TODO: this is copy and pasted from the bundled entities vendor file\r\n*/\r\n// import entities from 'entities';\r\n\r\nconst _encodeXMLContent = ((obj) => {\r\n  let invObj = getInverseObj(obj)\r\n  let replacer = getInverseReplacer(invObj)\r\n  return getInverse(invObj, replacer)\r\n})({\r\n  amp: \"&\",\r\n  gt: \">\",\r\n  lt: \"<\",\r\n})\r\n\r\nconst _encodeXMLAttr = ((obj) => {\r\n  let invObj = getInverseObj(obj)\r\n  let replacer = getInverseReplacer(invObj)\r\n  return getInverse(invObj, replacer)\r\n})({\r\n  quot: \"\\\"\",\r\n})\r\n\r\nfunction getInverseObj(obj){\r\n  return Object.keys(obj).sort().reduce(function(inverse, name){\r\n    inverse[obj[name]] = \"&\" + name + \";\";\r\n    return inverse;\r\n  }, {});\r\n}\r\n\r\nfunction getInverseReplacer(inverse){\r\n  var single = [],\r\n    multiple = [];\r\n\r\n  Object.keys(inverse).forEach(function(k){\r\n    if(k.length === 1){\r\n      single.push(\"\\\\\" + k);\r\n    } else {\r\n      multiple.push(k);\r\n    }\r\n  });\r\n\r\n\r\n  multiple.unshift(\"[\" + single.join(\"\") + \"]\");\r\n\r\n  return new RegExp(multiple.join(\"|\"), \"g\");\r\n}\r\n\r\nvar re_nonASCII = /[^\\0-\\x7F]/g;\r\nvar re_astralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\r\n\r\nfunction singleCharReplacer(c){\r\n  return \"&#x\" + c.charCodeAt(0).toString(16).toUpperCase() + \";\";\r\n}\r\n\r\nfunction astralReplacer(c){\r\n\r\n  var high = c.charCodeAt(0);\r\n  var low = c.charCodeAt(1);\r\n  var codePoint = (high - 0xD800) * 0x400 + low - 0xDC00 + 0x10000;\r\n  return \"&#x\" + codePoint.toString(16).toUpperCase() + \";\";\r\n}\r\n\r\nfunction getInverse(inverse, re){\r\n  function func(name){\r\n    return inverse[name];\r\n  }\r\n  return function(data){\r\n    return data\r\n      .replace(re, func)\r\n      .replace(re_astralSymbols, astralReplacer)\r\n      .replace(re_nonASCII, singleCharReplacer);\r\n  };\r\n}\r\n\r\n\r\nconst booleanAttributes = {\r\n  __proto__: null,\r\n  allowfullscreen: true,\r\n  async: true,\r\n  autofocus: true,\r\n  autoplay: true,\r\n  checked: true,\r\n  controls: true,\r\n  default: true,\r\n  defer: true,\r\n  disabled: true,\r\n  hidden: true,\r\n  ismap: true,\r\n  loop: true,\r\n  multiple: true,\r\n  muted: true,\r\n  open: true,\r\n  readonly: true,\r\n  required: true,\r\n  reversed: true,\r\n  scoped: true,\r\n  seamless: true,\r\n  selected: true,\r\n  typemustmatch: true\r\n};\r\n\r\nconst unencodedElements = {\r\n  __proto__: null,\r\n  style: true,\r\n  script: true,\r\n  xmp: true,\r\n  iframe: true,\r\n  noembed: true,\r\n  noframes: true,\r\n  plaintext: true,\r\n  noscript: true\r\n};\r\n\r\nconst singleTag = {\r\n  __proto__: null,\r\n  area: true,\r\n  base: true,\r\n  basefont: true,\r\n  br: true,\r\n  col: true,\r\n  command: true,\r\n  embed: true,\r\n  frame: true,\r\n  hr: true,\r\n  img: true,\r\n  input: true,\r\n  isindex: true,\r\n  keygen: true,\r\n  link: true,\r\n  meta: true,\r\n  param: true,\r\n  source: true,\r\n  track: true,\r\n  wbr: true,\r\n};\r\n\r\n\r\nexport default class DomUtils {\r\n\r\n  isTag(elem) {\r\n    return ElementType.isTag(elem)\r\n  }\r\n\r\n  removeElement(elem){\r\n    if(elem.prev) elem.prev.next = elem.next;\r\n    if(elem.next) elem.next.prev = elem.prev;\r\n    if(elem.parent){\r\n      var childs = elem.parent.childNodes;\r\n      let pos = childs.lastIndexOf(elem);\r\n      if (pos < 0) throw new Error('Invalid state')\r\n      childs.splice(pos, 1);\r\n      elem.parent = null;\r\n    }\r\n  }\r\n\r\n  replaceElement(elem, replacement){\r\n    if (replacement.parent) this.removeElement(replacement);\r\n    var prev = replacement.prev = elem.prev;\r\n    if(prev){\r\n      prev.next = replacement;\r\n    }\r\n\r\n    var next = replacement.next = elem.next;\r\n    if(next){\r\n      next.prev = replacement;\r\n    }\r\n\r\n    var parent = replacement.parent = elem.parent;\r\n    if(parent){\r\n      var childs = parent.childNodes;\r\n      let pos = childs.lastIndexOf(elem);\r\n      if (pos < 0) throw new Error('Invalid state')\r\n      childs[pos] = replacement;\r\n    }\r\n  }\r\n\r\n  appendChild(elem, child){\r\n    if (child.parent) this.removeElement(child);\r\n    child.parent = elem;\r\n\r\n    if(elem.childNodes.push(child) !== 1){\r\n      var sibling = elem.childNodes[elem.childNodes.length - 2];\r\n      sibling.next = child;\r\n      child.prev = sibling;\r\n      child.next = null;\r\n    }\r\n  }\r\n\r\n  append(elem, next){\r\n    if (next.parent) this.removeElement(next);\r\n    var parent = elem.parent,\r\n      currNext = elem.next;\r\n\r\n    next.next = currNext;\r\n    next.prev = elem;\r\n    elem.next = next;\r\n    next.parent = parent;\r\n\r\n    if(currNext){\r\n      currNext.prev = next;\r\n      if(parent){\r\n        var childs = parent.childNodes;\r\n        let pos = childs.lastIndexOf(currNext);\r\n        if (pos < 0) throw new Error('Invalid state')\r\n        childs.splice(pos, 0, next);\r\n      }\r\n    } else if(parent){\r\n      parent.childNodes.push(next);\r\n    }\r\n  }\r\n\r\n  prepend(elem, prev){\r\n    if (prev.parent) this.removeElement(prev);\r\n    var parent = elem.parent;\r\n    if(parent){\r\n      var childs = parent.childNodes;\r\n      let pos = childs.lastIndexOf(elem);\r\n      if (pos < 0) throw new Error('Invalid state')\r\n      childs.splice(pos, 0, prev);\r\n    }\r\n\r\n    if(elem.prev){\r\n      elem.prev.next = prev;\r\n    }\r\n\r\n    prev.parent = parent;\r\n    prev.prev = elem.prev;\r\n    prev.next = elem;\r\n    elem.prev = prev;\r\n  }\r\n\r\n\r\n  filter(test, element, recurse, limit){\r\n    if(!Array.isArray(element)) element = [element];\r\n\r\n    if(typeof limit !== \"number\" || !isFinite(limit)){\r\n      limit = Infinity;\r\n    }\r\n    return this.find(test, element, recurse !== false, limit);\r\n  }\r\n\r\n  find(test, elems, recurse, limit){\r\n    var result = [], childs;\r\n\r\n    for(var i = 0, j = elems.length; i < j; i++){\r\n      if(test(elems[i])){\r\n        result.push(elems[i]);\r\n        if(--limit <= 0) break;\r\n      }\r\n\r\n      childs = this.getChildren(elems[i]);\r\n      if(recurse && childs && childs.length > 0){\r\n        childs = this.find(test, childs, recurse, limit);\r\n        result = result.concat(childs);\r\n        limit -= childs.length;\r\n        if(limit <= 0) break;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  findOneChild(test, elems){\r\n    for(var i = 0, l = elems.length; i < l; i++){\r\n      if(test(elems[i])) return elems[i];\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  findOne(test, elems){\r\n    var elem = null;\r\n\r\n    for(var i = 0, l = elems.length; i < l && !elem; i++){\r\n      const child = elems[i];\r\n      if(!this.isTag(child)){\r\n        continue;\r\n      } else if(test(child)){\r\n        elem = child;\r\n      } else {\r\n        const childNodes = this.getChildren(child)\r\n        if (childNodes.length > 0) {\r\n          elem = this.findOne(test, childNodes);\r\n        }\r\n      }\r\n    }\r\n\r\n    return elem;\r\n  }\r\n\r\n  existsOne(test, elems){\r\n    for(var i = 0, l = elems.length; i < l; i++){\r\n      const elem = elems[i]\r\n      // test only elements\r\n      if (!this.isTag(elem)) continue\r\n      // found if the element itself matches\r\n      if (test(elem)) return true\r\n      // otherwise, if one of its children matches\r\n      const childNodes = this.getChildren(elem)\r\n      if (childNodes.length > 0 && this.existsOne(test, childNodes)) return true\r\n    }\r\n    return false;\r\n  }\r\n\r\n  findAll(test, elems){\r\n    var result = [];\r\n    for(var i = 0, j = elems.length; i < j; i++){\r\n      const elem = elems[i]\r\n      if(!this.isTag(elem)) continue;\r\n      if(test(elem)) result.push(elem);\r\n      const childNodes = this.getChildren(elem)\r\n      if(childNodes.length > 0){\r\n        result = result.concat(this.findAll(test, childNodes));\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  getAttributes(el) {\r\n    let attribs = el.getAttributes()\r\n    // HACK: this is a bit confusing, because MemoryDOMElement and BrowserDOMElement are\r\n    // not 100% compatible yet regarding getAttributes()\r\n    if (attribs instanceof Map) {\r\n      return Array.from(attribs)\r\n    } else if (attribs && attribs.forEach) {\r\n      let res = []\r\n      attribs.forEach((val, key) => {\r\n        res.push([key, val])\r\n      })\r\n      return res\r\n    } else {\r\n      return []\r\n    }\r\n  }\r\n\r\n  formatAttribs(el, opts = {}) {\r\n    let output = [];\r\n    const attributes = this.getAttributes(el)\r\n    attributes.forEach(([key, value]) => {\r\n      if (!value && booleanAttributes[key]) {\r\n        output.push(key);\r\n      } else {\r\n        output.push(key + '=\"' + (opts.decodeEntities ? _encodeXMLAttr(value) : value) + '\"');\r\n      }\r\n    });\r\n    return output.join(' ')\r\n  }\r\n\r\n  render(dom, opts) {\r\n    if (!Array.isArray(dom)) dom = [dom];\r\n    opts = opts || {};\r\n    let output = [];\r\n    for(var i = 0; i < dom.length; i++){\r\n      let elem = dom[i];\r\n      if (elem.type === 'root' || elem.type === 'document') {\r\n        output.push(this.render(this.getChildren(elem), opts));\r\n      } else if (ElementType.isTag(elem)) {\r\n        output.push(this.renderTag(elem, opts));\r\n      } else if (elem.type === ElementType.Directive) {\r\n        output.push(this.renderDirective(elem));\r\n      } else if (elem.type === ElementType.Comment) {\r\n        output.push(this.renderComment(elem));\r\n      } else if (elem.type === ElementType.CDATA) {\r\n        output.push(this.renderCdata(elem));\r\n      } else {\r\n        output.push(this.renderText(elem, opts));\r\n      }\r\n    }\r\n    return output.join('')\r\n  }\r\n\r\n  renderTag(elem, opts) {\r\n    const name = this.getName(elem)\r\n    if (name === \"svg\") opts = {decodeEntities: opts.decodeEntities, xmlMode: true};\r\n    let tag = '<' + name\r\n    let attribs = this.formatAttribs(elem, opts);\r\n    if (attribs) {\r\n      tag += ' ' + attribs;\r\n    }\r\n    const childNodes = this.getChildren(elem)\r\n    if (opts.xmlMode && childNodes.length === 0) {\r\n      tag += '/>';\r\n    } else {\r\n      tag += '>';\r\n      if (childNodes.length > 0) {\r\n        tag += this.render(childNodes, opts);\r\n      }\r\n      if (!singleTag[name] || opts.xmlMode) {\r\n        tag += '</' + name + '>';\r\n      }\r\n    }\r\n    return tag\r\n  }\r\n\r\n  renderDirective(elem) {\r\n    return '<' + this.getData(elem) + '>'\r\n  }\r\n\r\n  renderText(elem, opts) {\r\n    let text = this.getText(elem);\r\n    if (opts.decodeEntities) {\r\n      const parent = this.getParent(elem)\r\n      if (!(parent && this.getName(parent) in unencodedElements)) {\r\n        text = _encodeXMLContent(text);\r\n      }\r\n    }\r\n    return text\r\n  }\r\n\r\n  renderCdata(elem) {\r\n    return '<![CDATA[' + this.getData(elem) + ']]>'\r\n  }\r\n\r\n  renderComment(elem) {\r\n    return '<!--' + this.getData(elem) + '-->'\r\n  }\r\n\r\n  getInnerHTML(elem, opts){\r\n    const childNodes = this.getChildren(elem)\r\n    return childNodes.map((child) => {\r\n      return this.render(child, opts);\r\n    }).join(\"\")\r\n  }\r\n\r\n  getOuterHTML(elem, opts) {\r\n    return this.render(elem, opts)\r\n  }\r\n\r\n  getData(elem) {\r\n    return elem.data\r\n  }\r\n\r\n  getText(elem, sub){\r\n    if(Array.isArray(elem)) return elem.map(e => this.getText(e, sub)).join(\"\");\r\n    switch(elem.type) {\r\n      case ElementType.Tag:\r\n      case ElementType.Script:\r\n      case ElementType.Style:\r\n        return this.getText(this.getChildren(elem), true)\r\n      case ElementType.Text:\r\n      case ElementType.CDATA:\r\n        return elem.data\r\n      case ElementType.Comment:\r\n        // comments are not rendered\r\n        // into the textContent of parentNodes\r\n        if (sub) {\r\n          return \"\"\r\n        }\r\n        return elem.data\r\n      default:\r\n        return \"\"\r\n    }\r\n  }\r\n\r\n  getChildren(elem) {\r\n    return elem.childNodes;\r\n  }\r\n\r\n  getParent(elem){\r\n    return elem.parent;\r\n  }\r\n\r\n  getSiblings(elem){\r\n    var parent = this.getParent(elem);\r\n    return parent ? this.getChildren(parent) : [elem];\r\n  }\r\n\r\n  getAttributeValue(elem, name){\r\n    return elem.getAttribute(name);\r\n  }\r\n\r\n  hasAttrib(elem, name){\r\n    return elem.hasAttribute(name);\r\n  }\r\n\r\n  getName(elem){\r\n    return elem.name\r\n  }\r\n\r\n  getNameWithoutNS(elem){\r\n    return elem.nameWithoutNS\r\n  }\r\n\r\n}","import DomUtils from './domutils/DomUtils'\r\n\r\nconst domUtils = new DomUtils()\r\ndomUtils.DomUtils = DomUtils\r\n\r\nexport default domUtils"],"names":[],"mappings":"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"}